import{i,r as a,o as f,c as h,a as e,w as t,d as r,m as P,t as w,k as U,F as $,l as z,H as A,g as G}from"./index-BMrwXeSr.js";const I=["src"],M={__name:"VideoListTable",props:{items:{type:Array,required:!0},loading:{type:Boolean,required:!0}},emits:["getVideoList"],setup(g,{emit:d}){const s=g,_=d,o=i(""),x=i([{title:"Nombre",key:"full_name",align:"start",sortable:!1},{title:"Cédula",key:"dni",align:"start",sortable:!1},{title:"Fecha de subida",key:"created_at",align:"start",sortable:!1},{title:"Enlace",key:"url",align:"start",sortable:!1},{title:"Visualizar",key:"actions",align:"center",sortable:!1}]),c=i(!1),n=i({}),m=()=>{_("getVideoList")},C=V=>{n.value=V,c.value=!0},L=()=>{c.value=!1};return(V,u)=>{const y=a("v-icon"),p=a("v-btn"),b=a("v-col"),k=a("v-row"),B=a("v-text-field"),N=a("v-tooltip"),F=a("v-data-table"),T=a("v-card-title"),D=a("v-card-text"),q=a("v-card-actions"),E=a("v-card"),H=a("v-dialog");return f(),h($,null,[e(k,{class:"text-end"},{default:t(()=>[e(b,null,{default:t(()=>[e(p,{onClick:m,variant:"flat",color:"primary"},{default:t(()=>[e(y,null,{default:t(()=>[r("mdi-refresh")]),_:1}),r(" refrescar")]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(B,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=l=>o.value=l),"prepend-inner-icon":"mdi-filter",label:"Buscar",placeholder:"Filtrar datos"},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{search:o.value,loading:s.loading,headers:x.value,items:s.items,density:"compact","loading-text":"Buscando lista de videos...","no-data-text":"No hay datos","items-per-page-text":"Videos por página"},{"item.actions":t(({item:l})=>[e(N,{text:"Ver video"},{activator:t(({props:v})=>[e(p,P({icon:"",variant:"text"},v,{onClick:S=>C(l)}),{default:t(()=>[e(y,null,{default:t(()=>[r("mdi-video-box")]),_:1})]),_:2},1040,["onClick"])]),_:2},1024)]),_:2},1032,["search","loading","headers","items"]),e(H,{modelValue:c.value,"onUpdate:modelValue":u[1]||(u[1]=l=>c.value=l),"max-width":"800"},{default:t(()=>[e(E,null,{default:t(()=>[e(T,{class:"text-center"},{default:t(()=>{var l,v;return[r(w((l=n.value)==null?void 0:l.full_name)+" - "+w((v=n.value)==null?void 0:v.dni),1)]}),_:1}),e(D,null,{default:t(()=>[n.value?(f(),h("video",{key:0,src:n.value.url,controls:"",style:{width:"100%"}},null,8,I)):U("",!0)]),_:1}),e(q,null,{default:t(()=>[e(p,{onClick:L,block:"",color:"red",variant:"flat"},{default:t(()=>[r("cerrar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},J={__name:"VideoListView",setup(g){const d=i([]),s=i(!1);z(()=>{_()});const _=async()=>{try{s.value=!0;const o=await A.get("/video-upload");d.value=o.data.videos}catch(o){console.log(o)}finally{s.value=!1}};return(o,x)=>{const c=a("v-card-title"),n=a("v-card-text"),m=a("v-card");return f(),G(m,null,{default:t(()=>[e(c,null,{default:t(()=>[r("Lista de videos agregados")]),_:1}),e(n,null,{default:t(()=>[e(M,{items:d.value,loading:s.value,onGetVideoList:_},null,8,["items","loading"])]),_:1})]),_:1})}}};export{J as default};
